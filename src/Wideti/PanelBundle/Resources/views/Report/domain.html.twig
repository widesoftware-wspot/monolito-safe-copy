{% extends 'PanelBundle::reportList.html.twig' %}

{% block cards %}
    <div class="box-generic">
        <div class="">
            <div class="tabs active openedBefore" id="overview">
                <div class="row-fluid">
                    <div class="span12" style="margin-bottom: 10px;">
                        <div class="row-fluid">
                            <div class="span3">
                                <span class="widget-stats widget-stats-2">
                                    <span class="glyphicons globe_af"><i></i></span>
                                    <span class="txt"><span class="count" style="color: #496cad;">{{ totalDomains}}</span><br>Total de Domínios</span>
                                    <div class="clearfix"></div>
                                </span>
                            </div>
                            <div class="span3">
                                <span class="widget-stats widget-stats-2">
                                    <span class="glyphicons globe_af"><i></i></span>
                                    <span class="txt"><span class="count" style="color: #496cad;">{{ totalActiveDomains}}</span><br>Total de Domínios Ativos</span>
                                    <div class="clearfix"></div>
                                </span>
                            </div>
                            <div class="span3">
                                <span class="widget-stats widget-stats-2">
                                    <span class="glyphicons globe_af"><i></i></span>
                                    <span class="txt"><span class="count" style="color: #496cad;">{{ numPocClients}}</span><br>Total de Domínios em POC</span>
                                    <div class="clearfix"></div>
                                </span>
                            </div>
                            <div class="span3">
                                <span class="widget-stats widget-stats-2">
                                    <span class="glyphicons globe_af"><i></i></span>
                                    <span class="txt"><span class="count" style="color: #496cad;">{{ totalInactiveDomains}}</span><br>Total de Domínios Inativos</span>
                                    <div class="clearfix"></div>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tabs" id="network">
                <div class="row-fluid">
                    <div class="span12" style="margin-bottom: 10px;">
                        <div class="row-fluid">
                            <div class="span3">
                                <span class="widget-stats widget-stats-2">
                                    <span class="glyphicons router"><i></i></span>
                                    <span class="txt"><span class="count" style="color: #496cad;">{{ totalAccessPoints}}</span><br>Total Pontos de Acesso de Domínios</span>
                                    <div class="clearfix"></div>
                                </span>
                            </div>
                            <div class="span3">
                                <span href="#" class="widget-stats widget-stats-2">
                                    <span class="glyphicons router"><i></i></span>
                                    <span class="txt"><span class="count" style="color: #496cad;">{{ totalActiveAccessPoints}}</span><br>Total Pontos de Acesso de Domínios Ativos<br/></span>
                                    <div class="clearfix"></div>
                                </span>
                            </div>
                            <div class="span3">
                                <span href="#" class="widget-stats widget-stats-2">
                                    <span class="glyphicons router"><i></i></span>
                                    <span class="txt"><span class="count" style="color: #496cad;">{{ numPocDomains}}</span><br>Total Pontos de Acesso de Domínios em POC<br/></span>
                                    <div class="clearfix"></div>
                                </span>
                            </div>
                            <div class="span3">
                                <span href="#" class="widget-stats widget-stats-2">
                                    <span class="glyphicons router"><i></i></span>
                                    <span class="txt"><span class="count" style="color: #496cad;">{{ totalInactiveAccessPoints}}</span><br>Total Pontos de Acesso de Domínios Inativos<br/></span>
                                    <div class="clearfix"></div>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
{% endblock %}

{% block heading %}
    Domínios
{% endblock %}

{% block filterBlock %}
    {% block filter %}
        <div class="row-fluid">
            <div class="filter-bar margin-bottom-none">
                <form name="wideti_AdminBundle_usuarios_filter" method="get" action="" novalidate="novalidate">
                    <input type="hidden" id="domain_signup_flag" name="domain_signup_flag" value="no" readonly/>
                    <div id="wideti_AdminBundle_usuarios_filter">
                        <div>
                            <label for="wideti_AdminBundle_usuarios_filter_filtro" class="required" aria-required="true">Listar:</label>
                            <select id="search_by" name="search_by" aria-controls="DataTables_Table_0" class="form-control">
                                <option selected value disabled>-- Selecione --</option>
                                <option value="domains">Domínios com mais pontos de acesso</option>
                                <option value="domains_signups">Domínios com mais cadastros</option>
                            </select>
                        </div>
                        <div>
                            <label for="wideti_AdminBundle_usuarios_filter_filtro" class="required" aria-required="true">Exibir:</label>
                            <select id="limitFilter" name="limitFilter" id="limitFilter" aria-controls="DataTables_Table_0" class="form-control">
                                <option selected value disabled>-- Selecione --</option>
                                <option value="10">10</option>
                                <option value="20">20</option>
                                <option value="30">30</option>
                                <option value="40">40</option>
                                <option value="50">50</option>
                                <option value="75">75</option>
                                <option value="100">100</option>
                                <option value="10000">Todos</option>
                            </select>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-animate btn-animate-side btn-primary"><span>
                    <i class="icon wb-search" aria-hidden="true"></i> Filtrar</button>
                    <div class="col-md-6"></div>
                </form>
            </div>
        </div>
    {% endblock %}
{% endblock %}

{% block tableHead %} Mambo WiFi em POC {% endblock %}

{% block thead %}
    {% if hideTableFlag %}
        <th style="width: 1px;text-decoration: none;">#</th>
        <th style="width: 15px;text-decoration: none;">Total de cadastros</th>
        <th style="width: 150px;text-decoration: none;">Domínio</th>
    {% else %}
        <th style="width: 1px;text-decoration: none;">#</th>
        <th style="width: 15px;text-decoration: none;">Pontos de Acesso</th>
        <th style="width: 150px;text-decoration: none;">Domínio</th>
        <th style="width: 150px;text-decoration: none;">Razao Social</th>
    {% endif %}
{% endblock %}
{% block tbody %}
    {% if hideTableFlag %}
        {% set k=1 %}
        {% for domain,guests in domainsGuestsSorted %}
            <tr class="gradeX">
                <td>{{ k }}</td>
                <td>{{ guests }}</td>
                <td><a href="https://{{ domain }}.mambowifi.com" target="_blank">
                        {{ domain }}
                    </a></td>
            </tr>
            {% set k=k+1 %}
        {% endfor %}
    {% else %}
        {% set k=1 %}
        {% for client in domainsPerAccessPoints %}
            <tr class="gradeX">
                <td>{{ k }}</td>
                <td>{{ client.totalAps }}</td>
                <td><a href="https://{{ client.domain }}.mambowifi.com" target="_blank">
                        {{ client.domain }}
                    </a></td>
                <td>{{ client.company }}</td>
            </tr>
            {% set k=k+1 %}
        {% else %}
            <tr class="gradeX">
                <td colspan="7">Nenhum cliente encontrado.</td>
            </tr>
        {% endfor %}
    {% endif %}
{% endblock %}


{% block javascript %}
    {{ parent() }}
    <script>
        $(document).ready(function() {
            $('#search_by').change(function() {
                var searchByValue = $('#search_by').find(":selected").val();
                var flagValue = $('#domain_signup_flag');

                if (searchByValue == 'domains_signups') {
                    flagValue.val('yes');
                } else {
                    flagValue.val('no');
                }
            });
        });
    </script>
{% endblock %}